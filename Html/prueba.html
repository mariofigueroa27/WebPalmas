<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Palmas BI</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" href="D:\PlantillasProyectoPaginaBi\PaginaWeb\Css\MenuReporte.css">
</head>

<body style="
            background-image: url('https://palmasbiweb.surge.sh/Img/Imagenes de fondo/2.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            margin: 0;
            background-color: rgba(255, 255, 255, 0.5);
        ">

    <header class="header">
        <div id="logoContainer">
            <img src='https://palmasbiweb.surge.sh/Img\Logos PNG\Logo Grupo Palmas-03.png' alt='Logo'>
        </div>
        <nav>
            <ul>
                <li><a href="https://palmasbiweb.surge.sh/index.html">Inicio</a></li>
                <li><a id="inicio" href="https://palmasbiweb.surge.sh/Html/MenuReporte.html">Reportes</a></li>
                <li><a href="https://palmasbiweb.surge.sh/Html/MenuSabana.html">Sabanas</a></li>
                <li><a href="https://palmasbiweb.surge.sh/Html\MenuNprint.html">Nprinting</a></li>
                <li><a href="https://palmasbiweb.surge.sh/Html\MenuCelular.html">Celular</a></li>
            </ul>
        </nav>
    </header>

    <div class="body-container">
        <div class="row">
            <div class="column reportes-column">
                <div id="palmasVisionContainer">
                    <div class="palmas-vision">
                        <h2>
                            <span id="palmas">REPORTES</span>
                        </h2>
                    </div>
                </div>
                <img id="imgReport" src="https://palmasbiweb.surge.sh/Img/Carrusel/1.png" alt="Descripción de la imagen">
            </div>

            <div class="column left-column">
                <h2>Upstream</h2>
                <div class="menu-container">
                    <div class="menu-item" onclick="toggleTable(this)">
                        <div class="menu-dropdown">
                            <a>Recursos Humanos</a>
                        </div>
                    </div>
                    <div class="custom-table" id="customTableMarketing">
                        <table>
                            <tr data-id="1"> <!-- Añadir un atributo de datos con el identificador único -->
                                <td>People Analytics Palmas</td>
                            </tr>
                        </table>
                    </div>
                    <div class="menu-item" onclick="toggleTable(this)">
                        <div class="menu-dropdown">
                            <a>Riesgos</a>
                        </div>
                    </div>
                    <div class="custom-table" id="customTableMarketing">
                        <table>
                            <tr data-id="2"> <!-- Añadir un atributo de datos con el identificador único -->
                                <td>IGASA</td>
                            </tr>
                            <!-- Otras filas... -->
                        </table>
                    </div>
                    <!-- Otras secciones de menú... -->
                </div>
            </div>

        </div>
    </div>
    <footer class="footer">
        <p>CENTRALIZANDO SABERES, POTENCIANDO RESULTADOS</p>
    </footer>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="modal-content-wrapper">
                <div class="column left-content">
                    <img src="https://palmasbiweb.surge.sh/Img\Imagenes de fondo\1.jpg" alt="Descripción de la imagen">
                </div>
                <div class="column right-content">
                    <p><strong></strong></p>
                    <table>
                        <tr>
                            <td><strong>TIPO:</strong></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>Descripcion:</strong></td>
                            <td></td> <!-- Puedes completar la descripción si tienes información específica -->
                        </tr>
                        <tr>
                            <td><strong>Link:</strong></td>
                            <td><a href="" target="_blank">Enlace</a></td>
                        </tr>
                        <tr>
                            <td><strong>Lider Reporte:</strong></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>Frecuencia:</strong></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
            </div>
            <!-- Botón para abrir el chat -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var menuItems = document.querySelectorAll('.menu-item');

            function closeAllTables() {
                menuItems.forEach(function (menuItem) {
                    menuItem.classList.remove('active');
                    var table = menuItem.nextElementSibling;
                    if (table && table.classList.contains('custom-table')) {
                        table.style.maxHeight = '0';
                        table.style.opacity = '0';
                    }
                });
            }

            function toggleTable(menuItem) {
                var tableDetails = menuItem.nextElementSibling;
                var isActive = menuItem.classList.contains('active');

                closeAllTables();

                if (!isActive) {
                    menuItem.classList.add('active');
                    if (tableDetails && tableDetails.classList.contains('custom-table')) {
                        tableDetails.style.maxHeight = '1000px';
                        tableDetails.style.opacity = '1';
                    }
                }
            }

            menuItems.forEach(function (menuItem) {
                menuItem.addEventListener('click', function () {
                    toggleTable(menuItem);
                });
            });

            // Agregar evento de clic a las filas de la tabla para abrir el modal
            var tableRows = document.querySelectorAll('.custom-table tr');

            tableRows.forEach(function (row) {
                row.addEventListener('click', function () {
                    var reportId = row.getAttribute('data-id'); // Obtener el identificador único desde el atributo de datos
                    openModal(reportId);
                });
            });

            // Método para abrir el modal con datos de la API
            function openModal(reportId) {
                var apiUrl = 'https://webpalmasapis.azurewebsites.net/api/ListadoSabanaPorNombreReporte/' + encodeURIComponent(reportId);

                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            var data = JSON.parse(xhr.responseText);
                            updateModalContent(data);
                        } else {
                            console.error('Error al obtener datos de la API. Estado:', xhr.status);
                        }
                    }
                };

                xhr.open('GET', apiUrl, true);
                xhr.send();
            }

            function updateModalContent(data) {
                // Implementar la lógica para actualizar el contenido del modal con los datos obtenidos
                // Puedes acceder a los elementos del modal y establecer su contenido según los datos recibidos
            }

            function closeModal() {
                // Implementar la lógica para cerrar el modal
            }

        });
    </script>
</body>

</html>